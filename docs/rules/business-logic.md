# 业务逻辑设计

## 流程设计规范

### 要求
- 业务流程必须使用标准流程图表示
- 流程图必须包含起点、终点、决策点和异常处理流程
- 关键业务流程的每个节点必须有明确的状态定义

### 示例
一个完整的业务流程图应该包含：

1. **起点和终点**：明确标识流程的开始和结束
2. **处理步骤**：每个步骤应明确其功能和职责
3. **决策点**：明确条件判断和分支流程
4. **异常处理**：包含各种异常情况的处理路径
5. **状态转换**：说明系统或数据在各个步骤中的状态变化
6. **角色职责**：明确不同角色的责任和操作

## 规则设计规范

### 要求
- 业务规则必须清晰、无歧义
- 规则必须包含条件、动作和例外处理
- 复杂规则必须使用表格或决策树表示

### 示例
**业务规则表述示例**：

| 规则ID | 条件 | 动作 | 例外处理 |
|-------|-----|------|---------|
| R001 | 用户年龄 < 18岁 | 拒绝注册，提示"未满18岁无法注册" | 若为VIP邀请码用户，转人工审核 |
| R002 | 订单金额 > 10000元 | 要求上传付款凭证并人工审核 | 若为认证商户，金额上限提升至50000元 |
| R003 | 连续3次登录失败 | 锁定账号10分钟 | 若使用短信验证码，可立即解锁 |

**决策树示例**：
```
是否为注册用户?
├── 是
│   ├── 账户余额是否充足?
│   │   ├── 是 --> 允许下单
│   │   └── 否 --> 提示充值
└── 否
    ├── 是否有邀请码?
    │   ├── 是 --> 允许注册
    │   └── 否 --> 普通注册流程
```

## 产品指标设计

### 要求
- 每个功能模块必须设定清晰的产品指标
- 指标必须包含定义、计算方法和目标值
- 指标必须可测量、可比较

### 示例
**产品指标设计示例**：

| 指标名称 | 定义 | 计算方法 | 基准值 | 目标值 | 数据来源 |
|---------|-----|---------|-------|-------|---------|
| 用户活跃率 | 日活跃用户占注册用户的比例 | DAU/注册用户总数 | 15% | 25% | 用户行为日志 |
| 订单转化率 | 下单用户占浏览用户的比例 | 下单用户数/商品页面浏览用户数 | 3% | 5% | 订单系统 |
| 客单价 | 平均每个订单的金额 | 总订单金额/订单数 | ¥200 | ¥250 | 订单系统 |

## 数据模型设计

### 要求
- 数据模型必须明确定义实体关系
- 必须包含字段名称、类型、约束和说明
- 必须考虑数据的扩展性和兼容性

### 示例
**数据模型设计示例**：

**用户表(User)**

| 字段名 | 类型 | 约束 | 说明 |
|-------|-----|------|------|
| id | BigInt | 主键，自增 | 用户ID |
| username | VARCHAR(50) | 非空，唯一 | 用户名 |
| phone | VARCHAR(20) | 非空，唯一 | 手机号 |
| status | TINYINT | 非空，默认1 | 状态：1-正常，2-禁用，3-注销 |
| created_at | DATETIME | 非空 | 创建时间 |
| updated_at | DATETIME | 非空 | 更新时间 |

**关系描述**：
- 一个用户可以有多个订单（1:N）
- 一个用户可以有多个收货地址（1:N）
- 一个用户只能有一个会员等级（1:1） 