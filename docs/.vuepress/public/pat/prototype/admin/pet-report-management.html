<style>
    /* 健康分数输入框样式 */
    #health-score-input {
        transition: all 0.3s ease;
    }
    
    #health-score-input:focus {
        transform: scale(1.02);
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }
    
    /* 健康等级按钮动画 */
    .health-level-btn {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .health-level-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }
    

    
    /* 评级按钮渐变背景 */
    .rating-btn-gradient {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        transition: all 0.3s ease;
    }
    
    .rating-btn-gradient:hover {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        transform: translateY(-1px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }
    
    /* 模态框动画 */
    .modal-content {
        animation: modalSlideIn 0.3s ease-out;
    }
    
    @keyframes modalSlideIn {
        from {
            opacity: 0;
            transform: scale(0.95) translateY(-10px);
        }
        to {
            opacity: 1;
            transform: scale(1) translateY(0);
        }
    }
</style>

<div id="pet-report-management" class="page p-4">
    
    <!-- 主列表视图 -->
    <div id="main-view" class="bg-white p-6 rounded-lg shadow-md">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-semibold">宠物检测报告</h3>
            <div class="space-x-2">
                <button id="batch-import-btn" class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600">
                    <i class="fas fa-upload mr-2"></i>批量导入
                </button>
                <button id="add-new-report" class="px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600">
                    <i class="fas fa-plus mr-2"></i>新增报告
                </button>
            </div>
        </div>
        
        <div class="flex flex-col md:flex-row gap-4 mb-4">
            <div class="flex-1">
                <input type="text" id="search-report" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="搜索宠物姓名、主人姓名、报告编号">
            </div>
            <div class="flex space-x-2">
                <select id="filter-health-level" class="shadow border rounded py-2 px-3 text-gray-700 focus:outline-none focus:shadow-outline">
                    <option value="">全部健康等级</option>
                    <option value="A">A级 - 优秀</option>
                    <option value="B">B级 - 良好</option>
                    <option value="C">C级 - 一般</option>
                    <option value="D">D级 - 较差</option>
                    <option value="">未评级</option>
                </select>
                <select id="filter-status" class="shadow border rounded py-2 px-3 text-gray-700 focus:outline-none focus:shadow-outline">
                    <option value="">全部状态</option>
                    <option value="pending">待处理</option>
                    <option value="processing">检测中</option>
                    <option value="completed">已完成</option>
                    <option value="reviewed">已审核</option>
                </select>
            </div>
        </div>
        
        <div class="overflow-x-auto">
            <table class="min-w-full bg-white border border-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">报告编号</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">宠物信息</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">主人信息</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">检测状态</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">健康等级</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">创建时间</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                    </tr>
                </thead>
                <tbody id="report-table-body" class="bg-white divide-y divide-gray-200">
                    <tr>
                        <td colspan="7" class="px-6 py-4 text-center text-gray-500">暂无报告数据</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    
    <!-- 新增/编辑视图 -->
    <div id="form-view" class="bg-white p-6 rounded-lg shadow-md hidden">
        <div class="flex justify-between items-center mb-4">
            <h3 id="form-title" class="text-xl font-semibold">新增萌宠报告</h3>
            <button id="back-to-list" class="px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600">
                <i class="fas fa-arrow-left mr-2"></i>返回列表
            </button>
        </div>
        
        <form id="report-form" class="space-y-6">
            <!-- 宠物基本信息 -->
            <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                <div class="flex items-center justify-between mb-4">
                    <h4 class="text-lg font-medium text-gray-800">宠物基本信息</h4>
                    <div class="flex space-x-2">
                        <button type="button" id="select-from-pets-btn" class="text-sm px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600">
                            <i class="fas fa-search mr-1"></i>从宠物档案选择
                        </button>
                        <button type="button" id="manual-input-pet-btn" class="text-sm px-3 py-1 bg-gray-500 text-white rounded hover:bg-gray-600">
                            <i class="fas fa-edit mr-1"></i>手动输入
                        </button>
                    </div>
                </div>
                
                <!-- 宠物选择区域 -->
                <div id="pet-selection-area" class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="form-pet-select">
                        选择宠物 <span class="text-red-500">*</span>
                    </label>
                    <select id="form-pet-select" class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required>
                        <option value="">请选择宠物档案</option>
                    </select>
                    <p class="text-xs text-gray-500 mt-1">选择宠物后会自动填充基本信息和主人信息</p>
                </div>

                <!-- 宠物详细信息显示区域 -->
                <div id="pet-details-area" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="form-pet-name">
                            宠物姓名 <span class="text-red-500">*</span>
                        </label>
                        <input type="text" id="form-pet-name" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-100" placeholder="请先选择宠物档案" readonly required>
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="form-pet-breed">
                            品种 <span class="text-red-500">*</span>
                        </label>
                        <input type="text" id="form-pet-breed" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-100" placeholder="请先选择宠物档案" readonly required>
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="form-pet-age">
                            年龄
                        </label>
                        <input type="text" id="form-pet-age" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-100" placeholder="自动计算" readonly>
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="form-pet-gender">
                            性别
                        </label>
                        <input type="text" id="form-pet-gender" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-100" placeholder="自动填充" readonly>
                    </div>
                </div>
                
                <!-- 手动输入模式的字段（默认隐藏） -->
                <div id="manual-pet-inputs" class="grid grid-cols-1 md:grid-cols-2 gap-4 hidden">
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="manual-pet-name">
                            宠物姓名 <span class="text-red-500">*</span>
                        </label>
                        <input type="text" id="manual-pet-name" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="请输入宠物姓名">
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="manual-pet-breed">
                            品种 <span class="text-red-500">*</span>
                        </label>
                        <input type="text" id="manual-pet-breed" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="如：英国短毛猫">
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="manual-pet-age">
                            年龄
                        </label>
                        <input type="number" id="manual-pet-age" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="单位：岁" min="0" max="30" step="0.1">
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="manual-pet-gender">
                            性别
                        </label>
                        <select id="manual-pet-gender" class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                            <option value="">请选择</option>
                            <option value="male">公</option>
                            <option value="female">母</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- 主人信息 -->
            <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                <div class="flex items-center justify-between mb-4">
                    <h4 class="text-lg font-medium text-gray-800">主人信息</h4>
                    <div class="flex space-x-2">
                        <button type="button" id="select-from-customers-btn" class="text-sm px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600">
                            <i class="fas fa-search mr-1"></i>从客户管理选择
                        </button>
                        <button type="button" id="manual-input-owner-btn" class="text-sm px-3 py-1 bg-gray-500 text-white rounded hover:bg-gray-600">
                            <i class="fas fa-edit mr-1"></i>手动输入
                        </button>
                    </div>
                </div>
                
                <!-- 客户选择区域 -->
                <div id="customer-selection-area" class="mb-4 hidden">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="form-customer-select">
                        选择客户
                    </label>
                    <select id="form-customer-select" class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                        <option value="">请选择客户档案</option>
                    </select>
                    <p class="text-xs text-gray-500 mt-1">选择客户后会自动填充主人信息</p>
                </div>

                <!-- 主人详细信息显示区域 -->
                <div id="owner-details-area" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="form-owner-name">
                            主人姓名 <span class="text-red-500">*</span>
                        </label>
                        <input type="text" id="form-owner-name" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-100" placeholder="自动填充或手动输入" readonly required>
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="form-owner-phone">
                            联系电话
                        </label>
                        <input type="tel" id="form-owner-phone" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-100" placeholder="自动填充或手动输入" readonly>
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="form-owner-address">
                            联系地址
                        </label>
                        <input type="text" id="form-owner-address" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-100" placeholder="自动填充或手动输入" readonly>
                    </div>
                </div>

                <!-- 手动输入模式的字段（默认隐藏） -->
                <div id="manual-owner-inputs" class="grid grid-cols-1 md:grid-cols-2 gap-4 hidden">
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="manual-owner-name">
                            主人姓名 <span class="text-red-500">*</span>
                        </label>
                        <input type="text" id="manual-owner-name" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="请输入主人姓名">
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="manual-owner-phone">
                            联系电话
                        </label>
                        <input type="tel" id="manual-owner-phone" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="请输入联系电话">
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="manual-owner-address">
                            联系地址
                        </label>
                        <input type="text" id="manual-owner-address" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="请输入联系地址">
                    </div>
                </div>
                
                <!-- 关联提示信息 -->
                <div id="link-info" class="mt-4 p-3 bg-blue-100 border border-blue-300 rounded text-sm text-blue-800 hidden">
                    <i class="fas fa-info-circle mr-2"></i>
                    <span id="link-info-text">已自动关联宠物档案和客户信息</span>
                </div>
            </div>

            <!-- 检测信息 -->
            <div class="bg-gray-50 p-4 rounded-lg">
                <h4 class="text-lg font-medium mb-4 text-gray-800">检测信息</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="form-sample-type">
                            样本类型
                        </label>
                        <select id="form-sample-type" class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                            <option value="">请选择</option>
                            <option value="feces">粪便</option>
                            <option value="urine">尿液</option>
                            <option value="blood">血液</option>
                            <option value="saliva">唾液</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="form-test-date">
                            检测日期
                        </label>
                        <input type="date" id="form-test-date" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="form-status">
                            检测状态
                        </label>
                        <select id="form-status" class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                            <option value="pending">待处理</option>
                            <option value="processing">检测中</option>
                            <option value="completed">已完成</option>
                            <option value="reviewed">已审核</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- 检测数据编辑 -->
            <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                <h4 class="text-lg font-medium mb-4 text-gray-800">检测数据编辑</h4>
                
                <!-- Tab导航 -->
                <div class="mb-4">
                    <nav class="flex space-x-4" id="edit-tabs">
                        <button type="button" class="edit-tab-button text-blue-600 border-b-2 border-blue-600 py-2 px-1 text-sm font-medium" data-tab="phylum-edit">
                            门指标 (5项)
                        </button>
                        <button type="button" class="edit-tab-button text-gray-500 hover:text-gray-700 py-2 px-1 text-sm font-medium" data-tab="genus-edit">
                            属指标 (20+项)
                        </button>
                    </nav>
                </div>
                
                <!-- 门指标编辑Tab -->
                <div id="tab-phylum-edit" class="edit-tab-content">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="phylum-edit-container">
                        <!-- 门指标编辑字段将在这里动态生成 -->
                    </div>
                </div>
                
                <!-- 属指标编辑Tab -->
                <div id="tab-genus-edit" class="edit-tab-content hidden">
                    <div class="space-y-4" id="genus-edit-container">
                        <!-- 属指标编辑字段将在这里动态生成 -->
                    </div>
                </div>
            </div>

            <!-- 健康评级 (运营人员专用) -->
            <div id="health-assessment-section" class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                <div class="flex items-center justify-between mb-4">
                    <h4 class="text-lg font-medium text-gray-800">健康评级设置</h4>
                    <span class="text-sm text-yellow-600 bg-yellow-100 px-2 py-1 rounded">运营人员专用</span>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="form-health-level">
                            健康等级
                        </label>
                        <select id="form-health-level" class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                            <option value="">暂未评级</option>
                            <option value="A">A级 - 优秀</option>
                            <option value="B">B级 - 良好</option>
                            <option value="C">C级 - 一般</option>
                            <option value="D">D级 - 较差</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="form-health-score">
                            健康分数
                        </label>
                        <input type="number" id="form-health-score" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="0-100" min="0" max="100" step="0.1">
                    </div>
                </div>
                <div class="mt-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="form-health-advice">
                        健康建议
                    </label>
                    <textarea id="form-health-advice" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" rows="3" placeholder="请输入针对此宠物的健康建议和改善方案"></textarea>
                </div>
            </div>
            
            <div class="flex space-x-4">
                <button type="submit" id="save-report" class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600">
                    <i class="fas fa-save mr-2"></i>保存报告
                </button>
                <button type="button" id="cancel-form" class="px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600">
                    取消
                </button>
            </div>
        </form>
    </div>

    <!-- 批量导入视图 -->
    <div id="import-view" class="bg-white p-6 rounded-lg shadow-md hidden">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-semibold">批量导入报告</h3>
            <button id="back-to-list-from-import" class="px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600">
                <i class="fas fa-arrow-left mr-2"></i>返回列表
            </button>
        </div>
        
        <div class="space-y-6">
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                <h4 class="text-md font-medium text-blue-800 mb-2">导入说明</h4>
                <ul class="text-sm text-blue-700 space-y-1">
                    <li>• 支持Excel (.xlsx) 和 CSV (.csv) 格式文件</li>
                    <li>• 文件大小不超过10MB，单次最多导入1000条记录</li>
                    <li>• 必填字段：宠物姓名、品种、主人姓名</li>
                    <li>• <a href="#" id="download-template" class="text-blue-600 underline">下载导入模板</a></li>
                </ul>
            </div>
            
            <div>
                <label class="block text-gray-700 text-sm font-bold mb-2">
                    选择文件 <span class="text-red-500">*</span>
                </label>
                <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors">
                    <input type="file" id="import-file" accept=".xlsx,.csv" class="hidden">
                    <div id="file-drop-zone" class="cursor-pointer">
                        <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                        <p class="text-gray-600 mb-2">点击选择文件或拖拽文件到此处</p>
                        <p class="text-sm text-gray-500">支持 .xlsx, .csv 格式</p>
                    </div>
                    <div id="file-selected" class="hidden">
                        <i class="fas fa-file-excel text-4xl text-green-500 mb-4"></i>
                        <p id="selected-file-name" class="text-gray-700 font-medium"></p>
                        <button type="button" id="remove-file" class="mt-2 text-red-600 hover:text-red-800">
                            <i class="fas fa-times mr-1"></i>移除文件
                        </button>
                    </div>
                </div>
            </div>
            
            <div id="import-preview" class="hidden">
                <h4 class="text-md font-medium text-gray-800 mb-3">导入预览</h4>
                <div class="bg-gray-50 border rounded-lg p-4">
                    <div id="preview-summary" class="mb-4 text-sm text-gray-600"></div>
                    <div class="overflow-x-auto max-h-64">
                        <table class="min-w-full text-sm">
                            <thead id="preview-header" class="bg-gray-200"></thead>
                            <tbody id="preview-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <div class="flex space-x-4">
                <button type="button" id="start-import" class="px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:bg-gray-400" disabled>
                    <i class="fas fa-upload mr-2"></i>开始导入
                </button>
                <button type="button" id="cancel-import" class="px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600">
                    取消
                </button>
            </div>
        </div>
    </div>
    
    <!-- 健康评级模态框 -->
    <div id="health-rating-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4 transform transition-all modal-content">
            <div class="px-6 py-4 border-b border-gray-200">
                <div class="flex items-center justify-between">
                    <h3 class="text-lg font-semibold text-gray-900">健康评级设置</h3>
                    <button id="close-rating-modal" class="text-gray-400 hover:text-gray-600 transition-colors">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <div id="rating-pet-info" class="text-sm text-gray-600 mt-2">
                    <!-- 宠物信息将在这里显示 -->
                </div>
            </div>
            
            <div class="px-6 py-6 space-y-6">
                <!-- 健康等级选择 -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-3">健康等级</label>
                    <div class="grid grid-cols-2 gap-3">
                        <button type="button" class="health-level-btn p-3 rounded-lg border-2 border-gray-200 text-center hover:border-gray-300 transition-all transform hover:scale-105" data-level="A">
                            <div class="text-lg font-bold text-green-600">A级</div>
                            <div class="text-xs text-gray-500">优秀</div>
                            <div class="text-xs text-gray-400">90-100分</div>
                        </button>
                        <button type="button" class="health-level-btn p-3 rounded-lg border-2 border-gray-200 text-center hover:border-gray-300 transition-all transform hover:scale-105" data-level="B">
                            <div class="text-lg font-bold text-blue-600">B级</div>
                            <div class="text-xs text-gray-500">良好</div>
                            <div class="text-xs text-gray-400">75-89分</div>
                        </button>
                        <button type="button" class="health-level-btn p-3 rounded-lg border-2 border-gray-200 text-center hover:border-gray-300 transition-all transform hover:scale-105" data-level="C">
                            <div class="text-lg font-bold text-yellow-600">C级</div>
                            <div class="text-xs text-gray-500">一般</div>
                            <div class="text-xs text-gray-400">60-74分</div>
                        </button>
                        <button type="button" class="health-level-btn p-3 rounded-lg border-2 border-gray-200 text-center hover:border-gray-300 transition-all transform hover:scale-105" data-level="D">
                            <div class="text-lg font-bold text-red-600">D级</div>
                            <div class="text-xs text-gray-500">较差</div>
                            <div class="text-xs text-gray-400">0-59分</div>
                        </button>
                    </div>
                </div>
                
                <!-- 健康分数 -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">健康分数</label>
                    <input type="number" id="health-score-input" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" min="0" max="100" value="85" placeholder="请输入0-100的分数">
                    <p class="text-xs text-gray-500 mt-1">分数范围：0-100分</p>
                </div>
            </div>
            
            <div class="px-6 py-4 border-t border-gray-200 flex justify-end space-x-3">
                <button id="cancel-rating" class="px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors">
                    取消
                </button>
                <button id="save-rating" class="px-4 py-2 rating-btn-gradient text-white rounded-md transition-all transform shadow-lg">
                    <i class="fas fa-save mr-2"></i>保存评级
                </button>
            </div>
        </div>
    </div>
    
    <!-- 报告详情模态框 -->
    <div id="report-detail-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-lg shadow-xl max-w-6xl w-full mx-4 max-h-[95vh] overflow-hidden">
            <!-- 模态框头部 -->
            <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                <div>
                    <h3 class="text-lg font-semibold text-gray-900">宠物检测报告详情</h3>
                    <div id="report-detail-header" class="text-sm text-gray-600 mt-1">
                        <!-- 报告基本信息将在这里显示 -->
                    </div>
                </div>
                <button id="close-detail-modal" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <!-- 模态框主体 -->
            <div class="flex flex-col h-[85vh]">
                <!-- Tab导航 -->
                <div class="px-6 py-4 border-b border-gray-200">
                    <nav class="flex space-x-8" id="detail-tabs">
                        <button class="tab-button text-blue-600 border-b-2 border-blue-600 py-2 px-1 text-sm font-medium" data-tab="overview">
                            概览
                        </button>
                        <button class="tab-button text-gray-500 hover:text-gray-700 py-2 px-1 text-sm font-medium" data-tab="phylum">
                            门指标 (5项)
                        </button>
                        <button class="tab-button text-gray-500 hover:text-gray-700 py-2 px-1 text-sm font-medium" data-tab="genus">
                            属指标 (20+项)
                        </button>
                        <button class="tab-button text-gray-500 hover:text-gray-700 py-2 px-1 text-sm font-medium" data-tab="analysis">
                            分析建议
                        </button>
                    </nav>
                </div>
                
                <!-- Tab内容区域 -->
                <div class="flex-1 overflow-y-auto">
                    <!-- 概览 Tab -->
                    <div id="tab-overview" class="tab-content p-6">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- 基本信息 -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="text-md font-semibold text-gray-900 mb-3">基本信息</h4>
                                <div id="overview-basic-info" class="space-y-2 text-sm">
                                    <!-- 基本信息内容 -->
                                </div>
                            </div>
                            
                            <!-- 健康评估 -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="text-md font-semibold text-gray-900 mb-3">健康评估</h4>
                                <div id="overview-health-assessment" class="space-y-2 text-sm">
                                    <!-- 健康评估内容 -->
                                </div>
                            </div>
                            
                            <!-- 关键指标概览 -->
                            <div class="lg:col-span-2 bg-blue-50 rounded-lg p-4">
                                <h4 class="text-md font-semibold text-gray-900 mb-3">关键指标一览</h4>
                                <div id="overview-key-metrics" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
                                    <!-- 关键指标卡片 -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 门指标 Tab -->
                    <div id="tab-phylum" class="tab-content hidden p-6">
                        <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6">
                            <!-- 门指标卡片将在这里动态生成 -->
                        </div>
                    </div>
                    
                    <!-- 属指标 Tab -->
                    <div id="tab-genus" class="tab-content hidden p-6">
                        <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6">
                            <!-- 属指标卡片将在这里动态生成 -->
                        </div>
                    </div>
                    
                    <!-- 分析建议 Tab -->
                    <div id="tab-analysis" class="tab-content hidden p-6">
                        <div class="space-y-6">
                            <!-- 匹配的规则分析 -->
                            <div class="bg-blue-50 rounded-lg p-4">
                                <h4 class="text-md font-semibold text-gray-900 mb-3">
                                    <i class="fas fa-search text-blue-600 mr-2"></i>规则匹配分析
                                </h4>
                                <div id="matched-rules" class="space-y-4">
                                    <!-- 匹配的规则将在这里显示 -->
                                </div>
                            </div>
                            
                            <!-- 分析内容 -->
                            <div class="bg-green-50 rounded-lg p-4">
                                <h4 class="text-md font-semibold text-gray-900 mb-3">
                                    <i class="fas fa-lightbulb text-green-600 mr-2"></i>分析内容
                                </h4>
                                <div id="analysis-content" class="space-y-3">
                                    <!-- 分析内容将在这里显示 -->
                                </div>
                            </div>
                            
                            <!-- 建议内容 -->
                            <div class="bg-orange-50 rounded-lg p-4">
                                <h4 class="text-md font-semibold text-gray-900 mb-3">
                                    <i class="fas fa-heart text-orange-600 mr-2"></i>健康建议
                                </h4>
                                <div id="suggestion-content" class="space-y-3">
                                    <!-- 建议内容将在这里显示 -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 模态框底部 -->
            <div class="px-6 py-4 border-t border-gray-200 flex justify-end space-x-3">
                <button id="export-report-btn" class="px-4 py-2 text-blue-700 bg-blue-100 rounded-md hover:bg-blue-200">
                    <i class="fas fa-download mr-2"></i>导出报告
                </button>
                <button id="close-detail-btn" class="px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300">
                    关闭
                </button>
            </div>
        </div>
    </div>
</div>
